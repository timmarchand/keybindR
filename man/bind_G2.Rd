% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bind_G2.R
\name{bind_G2}
\alias{bind_G2}
\title{Bind G-Test (G2) Statistic}
\usage{
bind_G2(tbl, target_corpus = NULL, reference_corpus = NULL, signed = FALSE)
}
\arguments{
\item{tbl}{A data frame containing token counts.}

\item{target_corpus}{The name of the column containing counts from the target corpus (as a string).}

\item{reference_corpus}{The name of the column containing counts from the reference corpus (as a string).}

\item{signed}{Logical; if \code{TRUE}, the G2 statistic is multiplied by the sign of the residuals to indicate the direction
of association between the target and reference corpora.}
}
\value{
A data frame with the original columns and an additional \code{G2} column containing the G-Test statistic.
}
\description{
Computes the G-Test (G2) statistic for each token and adds it as a new column.
The G-Test is used to measure the association between a token and the target corpus compared to the reference corpus.
It compares the observed frequency of a token to the expected frequency, testing the null hypothesis of independence between the target and reference corpora.
}
\details{
The G-Test (G2) statistic is calculated as:
\deqn{G2 = 2 \times \sum O \times \log\left(\frac{O}{E}\right)}
where:
\itemize{
\item \eqn{O} is the observed count (from the contingency table).
\item \eqn{E} is the expected count (calculated using the marginal totals of the contingency table).
}

If the necessary contingency table columns (\code{a}, \code{b}, \code{c}, \code{d}) are not present in the data frame,
and \code{target_corpus} and \code{reference_corpus} are specified, the function will compute the contingency table.
If the columns are missing and the corpus columns are not specified, the function will stop with an error.

If \code{signed = TRUE}, the G2 statistic is multiplied by the sign of the residuals to reflect the direction of the association,
indicating whether the token is more likely to occur in the target or reference corpus.
}
\examples{
library(dplyr)

# Sample data
df <- data.frame(
  token = c("word1", "word2", "word3"),
  target_count = c(30, 50, 20),
  reference_count = c(40, 30, 10)
)

# Compute G2 statistic (signed)
df_with_G2 <- bind_G2(
  tbl = df,
  target_corpus = "target_count",
  reference_corpus = "reference_count",
  signed = TRUE
)

# View the result
print(df_with_G2)
}
