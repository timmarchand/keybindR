% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bind_cohenD.R
\name{bind_cohenD}
\alias{bind_cohenD}
\title{Bind Cohen's d Effect Size}
\usage{
bind_cohenD(tbl, target_corpus = NULL, reference_corpus = NULL)
}
\arguments{
\item{tbl}{A data frame containing token counts.}

\item{target_corpus}{The name of the column containing counts from the target corpus (as a string).}

\item{reference_corpus}{The name of the column containing counts from the reference corpus (as a string).}
}
\value{
A data frame with the original columns and an additional \code{cohen_d} column containing the effect sizes.
}
\description{
Calculates Cohen's d effect size for each token and adds it as a new column.
Cohen's d measures the standardized difference between two proportions and is useful
for comparing the relative importance of tokens between the target and reference corpora.
}
\details{
The function computes Cohen's d using the proportions of each token in the target and reference corpora.
The effect size is calculated as:
\deqn{d = \frac{p_1 - p_2}{s_p}}
where:
\itemize{
\item \eqn{p_1} is the proportion of the token in the target corpus.
\item \eqn{p_2} is the proportion of the token in the reference corpus.
\item \eqn{s_p} is the pooled standard deviation, calculated as:
\deqn{s_p = \sqrt{\frac{(p_1 (1 - p_1) + p_2 (1 - p_2))}{2}}}
}
A small constant is added to \eqn{s_p} when it equals zero to prevent division by zero.

If the necessary contingency table columns (\code{a}, \code{b}, \code{n1}, \code{n2}) are not present in the data frame,
and \code{target_corpus} and \code{reference_corpus} are specified, the function will compute the contingency table.
If the columns are missing and the corpus columns are not specified, the function will stop with an error.
}
\examples{
library(dplyr)

# Sample data
df <- data.frame(
  token = c("word1", "word2", "word3"),
  target_count = c(30, 50, 20),
  reference_count = c(40, 30, 10)
)

# Compute Cohen's d
df_with_cohenD <- bind_cohenD(
  tbl = df,
  target_corpus = "target_count",
  reference_corpus = "reference_count"
)

# View the result
print(df_with_cohenD)

}
