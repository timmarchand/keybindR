% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bind_KLD.R
\name{bind_KLD}
\alias{bind_KLD}
\title{Bind Kullback-Leibler Divergence (KLD) to Data Frame}
\usage{
bind_KLD(
  tbl,
  target_corpus = NULL,
  reference_corpus = NULL,
  signed = TRUE,
  normalized = TRUE
)
}
\arguments{
\item{tbl}{A data frame containing token counts for both the target and reference corpora.}

\item{target_corpus}{The name of the column containing counts from the target corpus (as a string).}

\item{reference_corpus}{The name of the column containing counts from the reference corpus (as a string).}

\item{signed}{Logical; if \code{TRUE}, the KLD is signed based on the difference in proportions between the target and reference corpora.}

\item{normalized}{Logical; if \code{TRUE}, the KLD is normalized to a \link{0,  1} interval using the formula \eqn{KLD_{normalized} = \frac{KLD_{raw}}{1 + KLD_{raw}}}.}
}
\value{
A data frame with the original columns and an additional \code{KLD} column containing the computed Kullback-Leibler Divergence for each token.
}
\description{
This function computes the Kullback-Leibler Divergence (KLD) for each token in the target corpus compared to the reference corpus and adds it as a new column to the data frame.
}
\details{
The Kullback-Leibler Divergence (KLD) is calculated as:
\deqn{KLD = P_{\text{present}} \log_2\left(\frac{P_{\text{present}}}{Q_{\text{present}}}\right) + P_{\text{absent}} \log_2\left(\frac{P_{\text{absent}}}{Q_{\text{absent}}}\right)}
where:
\itemize{
\item \eqn{P_{\text{present}}} is the proportion of the token present in the target corpus.
\item \eqn{P_{\text{absent}}} is the proportion of the token absent in the target corpus.
\item \eqn{Q_{\text{present}}} is the proportion of the token present in the reference corpus.
\item \eqn{Q_{\text{absent}}} is the proportion of the token absent in the reference corpus.
}

If \code{signed = TRUE}, the KLD is multiplied by -1 when the token is proportionally less frequent in the target corpus than in the reference corpus. If \code{normalized = TRUE}, the KLD is normalized to a \link{0,  1} interval.
}
\examples{
library(dplyr)

# Example data
df <- data.frame(
  token = c("word1", "word2", "word3"),
  target_count = c(30, 50, 20),
  reference_count = c(40, 30, 10)
)

# Compute KLD with signed and normalized options
df_with_KLD <- bind_KLD(
  tbl = df,
  target_corpus = "target_count",
  reference_corpus = "reference_count",
  signed = TRUE,
  normalized = TRUE
)

print(df_with_KLD)

}
